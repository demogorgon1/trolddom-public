expression .svara_can_afford:
{
	less_than_or_equal: 
	{
		client_untrain_talents_price: {}
		client_wallet_cash: {}
	}
}

dialogue_screen .svara_greetings:
{
	text: 
	[	
		"I'm Svara the resident deprogrammer.\n"
		"\n"
		"My services are reasonably priced at {$client_untrain_talents_price$}."
	]
	
	options:
	[
		{ 
			text: "Yes, please, I want to forget everything." 
			script: untrain_talents 
			condition: .svara_can_afford 
			confirmation: "This will reset all your talent points.\n\nDo you want to proceed?"
		}
		
		{ quest: .timeweaver_10 }
		{ quest<completion_only>: .timeweaver_10 }
		{ quest: .timeweaver_15 }
		{ quest<completion_only>: .timeweaver_15 }
		{ quest: .timeweaver_20 }
		{ quest<completion_only>: .timeweaver_20 }
		{ quest: .timeweaver_25 }
		{ quest<completion_only>: .timeweaver_25 }
		{ quest: .timeweaver_30 }
		{ quest<completion_only>: .timeweaver_30 }
	]
}

dialogue_root .svara_dialogue:
{
	.svara_greetings: { }
}

entity .svara: !NPC
{
	_string: "Svara the Deprogrammer"
	_dialogue_root: .svara_dialogue	
	_dialogue_scripts: [ untrain_talents ]	
	_sprite: woman_3
	_sprite_dead: woman_3_dead	
	_level: 10
	_faction: npcs		
	_creature_type: humanoid
	_loot_table: .npc
	_not_pushable: true	
}

############################################################
# Test Progression Quests

quest .timeweaver_10:
{
	string: "Thread of Fate I"
	text: [ "Speak with Svara." ]
	description: [ "Pull the thread of time and become your future self. Close your eyes, count to three, and whisper: \"I accept.\"\n\nDon't worry about paradoxes. Probably." ]
	completion: [ "You feel... different. Stronger. As if years of experience just downloaded directly into your brain.\n\nSide effects may include déjà vu, existential dread, and an inexplicable craving for cheese." ]
	level: 10
	reward_cash_multiplier: 3
	reward_xp_multiplier: 3
	repeat_mode: always
}


quest .timeweaver_15:
{
	string: "Thread of Fate I"
	text: [ "Speak with Svara." ]
	description: [ "Pull the thread of time and become your future self. Close your eyes, count to three, and whisper: \"I accept.\"\n\nDon't worry about paradoxes. Probably." ]
	completion: [ "You feel... different. Stronger. As if at least 5 years of experience just downloaded directly into your brain.\n\nSide effects may include déjà vu, existential dread, and an inexplicable craving for cheese." ]
	level: 15
	reward_cash_multiplier: 3
	reward_xp_multiplier: 3
	repeat_mode: always
	prerequisites: [ .timeweaver_10 ]
}

quest .timeweaver_20:
{
	string: "Thread of Fate II"
	text: [ "Speak with Svara." ]
	description: [ "The timeline grows impatient. Your future self is tapping their foot, arms crossed, wondering what's taking so long.\n\nBest not keep them waiting." ]
	completion: [ "Excellent. Your future self sends their regards. Also, they said to remind you to stretch more." ]
	level: 20
	reward_cash_multiplier: 3
	reward_xp_multiplier: 3
	repeat_mode: always
	prerequisites: [ .timeweaver_15 ]
}

quest .timeweaver_25:
{
	string: "Thread of Fate II"
	text: [ "Speak with Svara." ]
	description: [ "The timeline grows impatient. Your future self is tapping their foot, arms crossed, wondering what's taking so long.\n\nBest not keep them waiting." ]
	completion: [ "Is that... wrinkles I see on your face? A touch of gray hair. Are... are you sure you want to continue this?" ]
	level: 25
	reward_cash_multiplier: 3
	reward_xp_multiplier: 3
	repeat_mode: always
	prerequisites: [ .timeweaver_20 ]
}



quest .timeweaver_30:
{
	string: "Thread of Fate III"
	text: [ "Speak with Svara." ]
	description: [ "At this point, you and your future self are basically roommates. They keep borrowing your experience points and never pay rent.\n\nTime to collect." ]
	completion: [ "The threads of fate are thoroughly tangled now. Causality is more of a suggestion than a rule.\n\nYou're welcome." ]
	level: 30
	reward_cash_multiplier: 3
	reward_xp_multiplier: 3
	repeat_mode: always
	prerequisites: [ .timeweaver_25 ]
}
